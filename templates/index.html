<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
    <title>HVAC OPTIMAL CONTROL</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <!-- Bootstrap core CSS -->
    <link href="static/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!--external css-->
    <link href="static/lib/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="static/css/zabuto_calendar.css">
    <!--<link rel="stylesheet" type="text/css" href="static/lib/gritter/css/jquery.gritter.css" />-->
    <!-- Custom styles for this template -->
    <link href="static/css/style.css" rel="stylesheet">
    <link href="static/css/style-responsive.css" rel="stylesheet">
    <link href="static/css/jquery.growl.css" rel="stylesheet">
    <!--<link href="static/css/jquery.growl.css" rel="stylesheet">-->
    <link href="static/css/datepicker.css" rel="stylesheet">
    <!--<link href="static/css/main.css" rel="stylesheet">-->
</head>

<body>
    <section id="container">
        <!-- **********************************************************************************************************************************************************
        TOP BAR CONTENT & NOTIFICATIONS
        *********************************************************************************************************************************************************** -->
        <!--header start-->
        <header class="header black-bg">
            <div class="wrap-loading">
                <div><img src="static/img/ajax-loader.gif" /></div>
            </div>
            <div class="sidebar-toggle-box">
                <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
            </div>
            <!--logo start-->
            <a href="/" class="logo"><b>HVAC <span>OPTIMAL</span> SAVING</b></a>
            <!--logo end-->
            <div class="nav notify-row" id="top_menu">
                <!--  notification start -->
                <ul class="nav top-menu">
                    <!-- settings start -->
                    <li class="dropdown">
                        <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
                            <i class="fa fa-tasks"></i>
                            <span class="badge bg-theme">4</span>
                        </a>
                        <ul class="dropdown-menu extended tasks-bar">
                            <div class="notify-arrow notify-arrow-green"></div>
                            <li>
                                <p class="green">You have 4 pending tasks</p>
                            </li>
                            <li>
                                <a href="index.html#">
                                    <div class="task-info">
                                        <div class="desc">Dashio Admin Panel</div>
                                        <div class="percent">40%</div>
                                    </div>
                                    <div class="progress progress-striped">
                                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                                            <span class="sr-only">40% Complete (success)</span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="index.html#">
                                    <div class="task-info">
                                        <div class="desc">Database Update</div>
                                        <div class="percent">60%</div>
                                    </div>
                                    <div class="progress progress-striped">
                                        <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                            <span class="sr-only">60% Complete (warning)</span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="index.html#">
                                    <div class="task-info">
                                        <div class="desc">Product Development</div>
                                        <div class="percent">80%</div>
                                    </div>
                                    <div class="progress progress-striped">
                                        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
                                            <span class="sr-only">80% Complete</span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="index.html#">
                                    <div class="task-info">
                                        <div class="desc">Payments Sent</div>
                                        <div class="percent">70%</div>
                                    </div>
                                    <div class="progress progress-striped">
                                        <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%">
                                            <span class="sr-only">70% Complete (Important)</span>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="external">
                                <a href="#">See All Tasks</a>
                            </li>
                        </ul>
                    </li>
                    <!-- settings end -->
                    <!-- inbox dropdown start-->
                    <li id="header_inbox_bar" class="dropdown">
                        <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
                            <i class="fa fa-envelope-o"></i>
                            <span class="badge bg-theme">5</span>
                        </a>
                        <ul class="dropdown-menu extended inbox">
                            <div class="notify-arrow notify-arrow-green"></div>
                            <li>
                                <p class="green">You have 5 new messages</p>
                            </li>
                            <li>
                                <a href="index.html#">
                            <!--<span class="photo"><img alt="avatar" src="img/ui-zac.jpg"></span>-->
                            <span class="subject">
                            <span class="from">Zac Snider</span>
                            <span class="time">Just now</span>
                            </span>
                            <span class="message">
                            Hi mate, how is everything?
                            </span>
                            </a>
                            </li>
                            <li>
                                <a href="index.html#">
                            <!--<span class="photo"><img alt="avatar" src="img/ui-divya.jpg"></span>-->
                            <span class="subject">
                            <span class="from">Divya Manian</span>
                            <span class="time">40 mins.</span>
                            </span>
                            <span class="message">
                            Hi, I need your help with this.
                            </span>
                            </a>
                            </li>
                            <li>
                                <a href="index.html#">
                                    <!--<span class="photo"><img alt="avatar" src="img/ui-danro.jpg"></span>-->
                                    <span class="subject">
                                    <span class="from">Dan Rogers</span>
                                    <span class="time">2 hrs.</span>
                                    </span>
                                    <span class="message">
                                    Love your new Dashboard.
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="index.html#">
                            <!--<span class="photo"><img alt="avatar" src="img/ui-sherman.jpg"></span>-->
                            <span class="subject">
                            <span class="from">Dj Sherman</span>
                            <span class="time">4 hrs.</span>
                            </span>
                            <span class="message">
                            Please, answer asap.
                            </span>
                            </a>
                            </li>
                            <li>
                                <a href="index.html#">See all messages</a>
                            </li>
                        </ul>
                    </li>
                    <!-- inbox dropdown end -->
                    <!-- notification dropdown start-->
                    <li id="header_notification_bar" class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
                    <i class="fa fa-bell-o"></i>
                    <span class="badge bg-warning">7</span>
                    </a>
                    <ul class="dropdown-menu extended notification">
                    <div class="notify-arrow notify-arrow-yellow"></div>
                    <li>
                    <p class="yellow">You have 7 new notifications</p>
                    </li>
                    <li>
                    <a href="index.html#">
                    <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                    Server Overloaded.
                    <span class="small italic">4 mins.</span>
                    </a>
                    </li>
                    <li>
                    <a href="index.html#">
                    <span class="label label-warning"><i class="fa fa-bell"></i></span>
                    Memory #2 Not Responding.
                    <span class="small italic">30 mins.</span>
                    </a>
                    </li>
                    <li>
                    <a href="index.html#">
                    <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                    Disk Space Reached 85%.
                    <span class="small italic">2 hrs.</span>
                    </a>
                    </li>
                    <li>
                    <a href="index.html#">
                    <span class="label label-success"><i class="fa fa-plus"></i></span>
                    New User Registered.
                    <span class="small italic">3 hrs.</span>
                    </a>
                    </li>
                    <li>
                    <a href="index.html#">See all notifications</a>
                    </li>
                    </ul>
                    </li>
                    <!-- notification dropdown end -->
                </ul>
            <!--  notification end -->
            </div>
            <div class="top-menu">
                <ul class="nav pull-right top-menu">
                    <li><a class="logout" href="login.html">Logout</a></li>
                </ul>
            </div>
        </header>
        <!--header end-->
        <!-- **********************************************************************************************************************************************************
        MAIN SIDEBAR MENU
        *********************************************************************************************************************************************************** -->
        <!--sidebar start-->
        <aside>
            <div id="sidebar" class="nav-collapse ">
                <!-- sidebar menu start-->
                <ul class="sidebar-menu" id="nav-accordion">
                <!--<p class="centered"><a href="profile.html"><img src="img/ui-sam.jpg" class="img-circle" width="80"></a></p>-->
                <!--<h5 class="centered">Sam Soffes</h5>-->
                    <li class="mt">
                        <a class="active" href="/">
                            <i class="fa fa-dashboard"></i>
                            <span>대시보드</span>
                        </a>
                    </li>
                    <li>
                        <a href="query">
                            <!--<i class="fa fa-desktop"></i>-->
                            <i class="fas fa-chart-bar"></i>
                            <span>에너지 조회</span>
                        </a>
                    </li>
                    <li>
                        <a href="analysis">
                            <!--<i class="fa fa-cogs"></i>-->
                            <i class="fas fa-chart-pie"></i>
                            <span>에너지 분석</span>
                        </a>
                    </li>
                    <li>
                        <a href="control">
                            <i class="fab fa-whmcs"></i>
                            <span>제어</span>
                        </a>
                    </li>
                    <li>
                        <a href="target">
                            <!--<i class="fa fa-tasks"></i>-->
                            <i class="fas fa-sliders-h"></i>
                            <span>목표관리</span>
                        </a>
                    </li>
                    <li>
                        <a href="room">
                            <i class="fas fa-suitcase-rolling"></i>
                            <span>객실</span>
                        </a>
                    </li>
                    <li>
                        <a href="sAdmin">
                            <i class="fa fa-desktop"></i>
                            <span>관리자 페이지</span>
                            <span class="label label-theme pull-right mail-info">2</span>
                        </a>
                    </li>
                </ul>
            <!-- sidebar menu end-->
            </div>
        </aside>
        <!--sidebar end-->
        <!-- **********************************************************************************************************************************************************
        MAIN CONTENT
        *********************************************************************************************************************************************************** -->
        <!--main content start-->
        <section id="main-content">
            <section class="wrapper">
                <div class="row">
                    <div class="col-lg-10 main-chart">
                        <iframe id="encoder_iframe" height="830px" width="100%" src="{% url 'dashboard' %}">
                        </iframe>
                    </div>
                    <div class="col-lg-2 ds">
                        <div class="donut-main">
                            <div class="weather pn">
                                <img src='static/img/weather/sun.svg' width="60px">
                                <div class="chart">
                                    <ul>
                                        <li><i class="fas fa-temperature-high fa-2x"></i></li>
                                        <li></li>
                                        <li><i class="fas fa-tint fa-2x"></i></li>
                                        <li></li>
                                    </ul>
                                    <h4>강원도 양양군 양양읍</h4>
                                </div>
                            </div>
                        </div>
                        <select class="form-control">
                            <option>오션벨리</option>
                            <option>대명리조트 양양점</option>
                        </select>

                        <div id="calendar" class="mb">
              <div class="panel green-panel no-margin">
                <div class="panel-body">
                  <div id="date-popover" class="popover top" style="cursor: pointer; disadding: block; margin-left: 33%; margin-top: -50px; width: 175px;">
                    <div class="arrow"></div>
                    <h3 class="popover-title" style="disadding: none;"></h3>
                    <div id="date-popover-content" class="popover-content"></div>
                  </div>
                  <div id="my-calendar"></div>
                </div>
              </div>
            </div>

                        <!-- / calendar -->
                    </div>
                </div>
                <!--footer start-->
                <footer class="site-footer">
                    <div class="text-center mt">
                        <p>&copy; Copyrights <strong>HVAC OPTIMAL SAVING</strong>.</p>
                            <!--<div class="credits">-->
                            <!--&lt;!&ndash;-->
                            <!--You are NOT allowed to delete the credit link to TemplateMag with free version.-->
                            <!--You can delete the credit link only if you bought the pro version.-->
                            <!--Buy the pro version with working PHP/AJAX contact form: https://templatemag.com/dashio-bootstrap-admin-template/-->
                            <!--Licensing information: https://templatemag.com/license/-->
                            <!--&ndash;&gt;-->
                            <!--Created with Dashio template by <a href="https://templatemag.com/">TemplateMag</a>-->
                            <!--</div>-->
                        <a href="index.html#" class="go-top">
                            <i class="fa fa-angle-up"></i>
                        </a>
                    </div>
                </footer>
                <!--footer end-->
            </section>
            <!--wrapper end-->
        </section>
        <!--main content end-->
    </section>
    <!--container end-->
</body>
<!-- js placed at the end of the document so the pages load faster -->
<script src="static/lib/jquery/jquery.min.js"></script>
<script src="static/lib/bootstrap/js/bootstrap.min.js"></script>
<script src="static/lib/jquery.dcjqaccordion.2.7.js"></script>
<script src="static/lib/jquery.scrollTo.min.js"></script>
<script src="static/lib/jquery.nicescroll.js" type="text/javascript"></script>
<script src="static/lib/zabuto_calendar.js"></script>
<!--<script src="static/lib/echarts/dist/echarts.min.js"></script>-->
<script src="static/js/echarts-dev.js"></script>
<script src="static/js/common-scripts.js"></script>
<!--<script src="static/js/jquery.growl.js"></script>-->
<!--<script src="static/js/gauge.min.js"></script>-->
<!--<script src="static/js/gauges.js"></script>-->
<!--<script src="static/js/datepicker.js"></script>-->
<!--<script src="static/js/datepicker.ko-KR.js"></script>-->
<!--<script src="static/js/main.js"></script>-->
<script src="static/js/jquery.knob.js"></script>
<script src="static/js/jquery.growl.js"></script>
<!--Plugin CSS file with desired skin-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.0/css/ion.rangeSlider.min.css"/>
<!--jQuery-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>-->
<!--Plugin JavaScript file-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.0/js/ion.rangeSlider.min.js"></script>


<script type="application/javascript">
$(document).ready(function() {
    $(".wrap-loading").hide();
    <!--iframe URL 바꾸기-->
    $(".sidebar-menu li a").click(function(e){
        e.preventDefault();
        var href = $(this).attr("href");

        if(href != "/"){
            switch(href) {
                case "query":
                    $("#encoder_iframe").attr("src", "{% url 'query' %}"); break;
                case "analysis":
                    $("#encoder_iframe").attr("src", "{% url 'analysis' %}"); break;
                case "control":
                    $("#encoder_iframe").attr("src", "{% url 'control' %}"); break;
                case "target":
                    $("#encoder_iframe").attr("src", "{% url 'target' %}"); break;
                case "room":
                    $("#encoder_iframe").attr("src", "{% url 'room' %}"); break;
                case "sAdmin":
                        $("#encoder_iframe").attr("src", "{% url 'sAdmin' %}"); break;
                default:
                    $("#encoder_iframe").attr("src", "{% url 'dashboard' %}");
            }
        }else{
            $("#encoder_iframe").attr("src", "{% url 'dashboard' %}");
        }
    });

    <!--날씨정보 가져오기 AJAX-->
    $.ajax({
        url:'/getWeatherInfo/',
        dataType:'json',
        type:'GET',
        async: false,
        cache: false,
        contentType: 'application/json',
        success:function(result){
            <!--alert(JSON.stringify(result));-->
            $.each(result, function(key, value){
                $.each(value, function(key, value){
                    console.log(key, value);
                });
            });

            var baseTime = result.weather_dic.baseTime;
            var cur_weather_info = result.weather_dic.forecast_data[0];
            var fcstTime = cur_weather_info.fcstTime;
            var sky = cur_weather_info.하늘상태;
            var pty = cur_weather_info.강수형태;
            var T1H = cur_weather_info.기온;
            var REH = cur_weather_info.습도;

            $('.weather div ul li:nth-child(2)').text(T1H + 'ºC');
            $('.weather div ul li:nth-child(4)').text(REH + '%');
            var svgIcon = $('.weather img').attr('src');

            if (pty == 0){
                switch(sky){
                    case 2: $('.weather img').attr('src', svgIcon.replace(/([^/]+)\.svg$/, 'partly cloudy.svg')); break;
                    case 3: $('.weather img').attr('src', svgIcon.replace(/([^/]+)\.svg$/, 'mostly cloudy.svg')); break;
                    case 4: $('.weather img').attr('src', svgIcon.replace(/([^/]+)\.svg$/, 'cloud.svg')); break;
                    default: $('.weather img').attr('src', svgIcon.replace(/([^/]+)\.svg$/, 'sun.svg'));
                }
            }else if (pty == 1){
                $('.weather img').attr('src', svgIcon.replace(/([^/]+)\.svg$/, 'rainy.svg'));
            }else if (pty == 2){
                $('.weather img').attr('src', svgIcon.replace(/([^/]+)\.svg$/, 'rainy_snowy.svg'));
            }else {
                $('.weather img').attr('src', svgIcon.replace(/([^/]+)\.svg$/, 'snowy.svg'));
            }
        },
        error: function(status, errorMsg){
          alert(errorMsg);
        }
    });
    timer = setTimeout(function(){
        $.growl.error({message: "HVAC제어기 상태 이상", fixed: true, size: 'large', delayOnHover: false});
    }, 2000);
    timer = setTimeout(function(){
        $.growl.warning({message: "전력사용량이 급증", fixed: true, size: 'large', delayOnHover: false});
    }, 3000);
    timer = setTimeout(function(){
        $.growl.notice({message: "오늘의 날씨는 어제보다 2℃ 낮음", fixed: true, size: 'large', delayOnHover: false});
    }, 4000);
    <!--var $loading = $('.wrap-loading').hide();-->
    <!--// var $loading = document.getElementById('iframe').contentWindow.document;-->
    <!--// var $loading = $('#iframe')[0].contentWindow;-->


    <!--$('#encoder_iframe').get(0).contentWindow.document-->
    <!--.ajaxStart(function () {-->
        <!--//ajax request went so show the loading image-->
        <!--alert("dddddddd");-->
         <!--$loading.show();-->
        <!--});-->

    <!--$('#iframe')[0].contentWindow.$(document)-->
        <!--.ajaxStart(function () {-->
        <!--//ajax request went so show the loading image-->
         <!--$loading.show();-->
        <!--})-->
        <!--.ajaxStop(function () {-->
        <!--//got response so hide the loading image-->
        <!--$loading.hide();-->
    <!--});-->

    $("#my-calendar").zabuto_calendar({
        <!--action: function() {-->
          <!--return myDateFunction(this.id, false);-->
        <!--},-->
        <!--action_nav: function() {-->
          <!--return myNavFunction(this.id);-->
        <!--},-->
        cell_border: true,
        today: true,
        language : "kr"
    });

});

  </script>


</html>
<!--<script src="static/js/custom_chart.js"></script>-->